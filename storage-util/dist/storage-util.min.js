/**
 * storage-util v1.0.4
 * (c) 2019-2019 weijhfly https://github.com/weijhfly/js-utils
 * Licensed under MIT
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).StorageUtil=t()}(this,function(){"use strict";function e(e,t){this.success="object"==typeof t?t.success:function(){},this.fail="object"==typeof t?t.fail:function(){},this.setType(e)}return e.prototype.isSupport=function(){return this.isCookie()?document.cookie&&navigator.cookieEnabled:void 0!==window[this.type]},e.prototype.get=function(e,t){try{var o=e.split(","),i=this.master(o,"get");return t?(t.apply(this,i),this):1<o.length?i:i[0]||null}catch(e){return console.error(e),null}},e.prototype.set=function(e,t,o){try{var i={};"object"!=typeof e?i[e]=t:(o=t,i=e),this.master(i,"set",o),this.success()}catch(e){console.error(e),this.fail()}return this},e.prototype.remove=function(e){try{var t=e.split(",");this.master(t,"remove")}catch(e){console.error(e)}return this},e.prototype.setType=function(e){return e=e||0,this.type=["sessionStorage","localStorage","cookie"][e]||e,this},e.prototype.master=function(e,t,o){var n=[],r=this.isCookie(),s=this;if("get"==t){for(var i in e)c(e[i]);return n}if("set"==t)for(var i in e)p(i,e[i],o);else if("remove"==t)for(var i in e)u(e[i]);function c(e){if(r){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),o=document.cookie.match(t),i=o?unescape(o[2]):null;n.push(s.isJson(i)||i)}else i=window[s.type][e],n.push(s.isJson(i)||i)}function p(e,t,o){if(t="object"==typeof t?JSON.stringify(t):t,r){o=o||72e5;var i=new Date;i.setTime(i.getTime()+o),document.cookie=e+"="+escape(t)+";expires="+i.toUTCString()}else window[s.type][e]=t}function u(e){if(r){var t=new Date,o=s.get(e);t.setTime(t.getTime()-1),null!=o&&(document.cookie=e+"="+o+";expires="+t.toUTCString())}else delete window[s.type][e]}},e.prototype.isJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return t},e.prototype.isCookie=function(){return"cookie"===this.type},e});
